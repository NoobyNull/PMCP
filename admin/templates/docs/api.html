{% extends "base.html" %}

{% block title %}API Documentation - PerfectMCP{% endblock %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2"><i class="bi bi-book"></i> API Documentation</h1>
</div>

<div class="row">
    <div class="col-md-3">
        <div class="card">
            <div class="card-header">
                <h5><i class="bi bi-list"></i> Table of Contents</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li><a href="#overview" class="text-decoration-none">Overview</a></li>
                    <li><a href="#authentication" class="text-decoration-none">Authentication</a></li>
                    <li><a href="#endpoints" class="text-decoration-none">API Endpoints</a></li>
                    <li><a href="#mcp-protocol" class="text-decoration-none">MCP Protocol</a></li>
                    <li><a href="#examples" class="text-decoration-none">Examples</a></li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="col-md-9">
        <div class="card">
            <div class="card-body">
                <section id="overview">
                    <h3><i class="bi bi-info-circle"></i> Overview</h3>
                    <p>PerfectMCP provides a comprehensive REST API and MCP (Model Context Protocol) interface for AI-powered development tools.</p>
                    
                    <div class="alert alert-info">
                        <strong>Base URL:</strong> <code>http://192.168.0.78:8000</code><br>
                        <strong>Admin URL:</strong> <code>http://192.168.0.78:8080</code>
                    </div>
                </section>

                <section id="authentication" class="mt-4">
                    <h3><i class="bi bi-shield-check"></i> Authentication</h3>
                    <p>API requests require authentication using API keys or JWT tokens.</p>
                    
                    <h5>API Key Authentication</h5>
                    <pre><code>curl -H "Authorization: Bearer YOUR_API_KEY" http://192.168.0.78:8000/api/endpoint</code></pre>
                </section>

                <section id="endpoints" class="mt-4">
                    <h3><i class="bi bi-server"></i> API Endpoints</h3>
                    
                    <h5>Health Check</h5>
                    <div class="bg-light p-3 rounded">
                        <strong>GET</strong> <code>/health</code><br>
                        <small>Check server health and service status</small>
                    </div>

                    <h5 class="mt-3">Memory Service</h5>
                    <div class="bg-light p-3 rounded">
                        <strong>POST</strong> <code>/api/memory/context</code><br>
                        <small>Store or retrieve memory context for sessions</small>
                    </div>

                    <h5 class="mt-3">Code Analysis</h5>
                    <div class="bg-light p-3 rounded">
                        <strong>POST</strong> <code>/api/code/analyze</code><br>
                        <small>Analyze code for improvements and suggestions</small>
                    </div>

                    <h5 class="mt-3">Document Search</h5>
                    <div class="bg-light p-3 rounded">
                        <strong>POST</strong> <code>/api/rag/search</code><br>
                        <small>Search documents using RAG (Retrieval-Augmented Generation)</small>
                    </div>
                </section>

                <section id="mcp-protocol" class="mt-4">
                    <h3><i class="bi bi-plugin"></i> MCP Protocol</h3>
                    <p>PerfectMCP implements the Model Context Protocol for seamless integration with AI development tools.</p>
                    
                    <h5>MCP Endpoint</h5>
                    <div class="bg-light p-3 rounded">
                        <strong>POST</strong> <code>/</code><br>
                        <small>JSON-RPC 2.0 endpoint for MCP communication</small>
                    </div>

                    <h5 class="mt-3">Available Tools</h5>
                    <ul>
                        <li><strong>memory_context</strong> - Manage session memory</li>
                        <li><strong>code_analysis</strong> - Analyze and improve code</li>
                        <li><strong>document_search</strong> - Search knowledge base</li>
                    </ul>
                </section>

                <section id="examples" class="mt-4">
                    <h3><i class="bi bi-code-square"></i> Examples</h3>
                    
                    <h5>MCP Tool Call Example</h5>
                    <pre><code>{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "tools/call",
  "params": {
    "name": "code_analysis",
    "arguments": {
      "code": "def hello():\n    print('Hello, World!')",
      "language": "python"
    }
  }
}</code></pre>

                    <h5 class="mt-3">Health Check Example</h5>
                    <pre><code>curl http://192.168.0.78:8000/health</code></pre>
                </section>
            </div>
        </div>
    </div>
</div>
{% endblock %}
