# PMCP Server Configuration Example
# Copy this file to server.yaml and customize for your environment

# Server Configuration
server:
  host: "0.0.0.0"  # Listen on all interfaces
  port: 8000       # API server port
  debug: false     # Set to true for development

# Admin Interface Configuration
admin:
  host: "0.0.0.0"  # Admin interface host
  port: 8080       # Admin interface port

# CORS Configuration
cors:
  allow_origins: ["http://localhost:*", "http://127.0.0.1:*"]
  allow_credentials: true
  allow_methods: ["*"]
  allow_headers: ["*"]

# SSH/SFTP Configuration
ssh:
  enabled: true
  host: "0.0.0.0"
  port: 2222
  host_key_path: "/opt/PerfectMCP/config/ssh_host_key"
  auth:
    enabled: false      # Disable authentication for development
    password_auth: false
    key_auth: false

# Database Configuration
database:
  redis:
    host: "localhost"
    port: 6379
    db: 0
    password: null      # Set if Redis requires authentication
  
  mongodb:
    host: "localhost"
    port: 27017
    database: "perfectmcp"
    username: null      # Set if MongoDB requires authentication
    password: null

# AI Model Configuration
ai_models:
  # OpenAI Configuration
  openai:
    api_key: ""         # Your OpenAI API key
    model: "gpt-4"      # Default model
    max_tokens: 2000
    temperature: 0.1
  
  # Anthropic Configuration
  anthropic:
    api_key: ""         # Your Anthropic API key
    model: "claude-3-sonnet-20240229"
    max_tokens: 2000
    temperature: 0.1
  
  # Google Gemini Configuration
  gemini:
    api_key: ""         # Your Google AI API key
    model: "gemini-1.5-pro"
    max_tokens: 2000
    temperature: 0.1

# Code Improvement Service Configuration
code_improvement:
  enabled: true
  analysis:
    max_file_size: 1048576  # 1MB max file size
    supported_languages: ["python", "javascript", "typescript", "java", "cpp", "c", "go", "rust"]
  ai_model:
    provider: "openai"      # Options: "openai", "anthropic", "gemini"
    model: "gpt-4"
    max_tokens: 2000
    temperature: 0.1

# Memory Service Configuration
memory:
  max_context_size: 10000
  session_timeout: 3600    # 1 hour
  max_sessions: 1000
  context:
    auto_summarize: true
    summary_threshold: 8000
    max_history_items: 100

# RAG/Documentation Service Configuration
rag:
  enabled: true
  vector_db:
    provider: "chromadb"
    collection_name: "mcp_docs"
    embedding_model: "all-MiniLM-L6-v2"
    persist_directory: "/opt/PerfectMCP/data/chromadb"
  
  document_processing:
    max_file_size: 10485760  # 10MB
    supported_formats: ["txt", "md", "pdf", "docx", "html"]
    chunk_size: 1000
    chunk_overlap: 200

# Logging Configuration
logging:
  level: "INFO"           # DEBUG, INFO, WARNING, ERROR
  format: "human"         # human, json
  file: "/opt/PerfectMCP/logs/server.log"
  max_size: "100MB"
  backup_count: 5
  
  # Syslog integration (optional)
  syslog:
    enabled: false
    address: "/dev/log"
    facility: "local0"
  
  # Component-specific log levels
  components:
    database: "INFO"
    api: "INFO"
    websocket: "INFO"
    ssh: "INFO"
    memory: "DEBUG"
    code_improvement: "INFO"
    rag: "INFO"

# Security Configuration
security:
  # API Key management
  api_keys:
    enabled: true
    default_permissions: ["read", "write"]
    rate_limit: 1000  # requests per hour
  
  # File access restrictions
  file_access:
    allowed_paths: ["/opt/PerfectMCP/data", "/tmp"]
    forbidden_paths: ["/etc", "/root", "/home"]
    max_file_size: 104857600  # 100MB

# Plugin Configuration
plugins:
  enabled: true
  directory: "/opt/PerfectMCP/plugins"
  auto_discovery: true
  update_check_interval: 86400  # 24 hours

# Monitoring Configuration
monitoring:
  enabled: true
  metrics_retention: 604800  # 7 days
  health_check_interval: 30  # seconds
  
  # Performance thresholds
  performance:
    slow_request_threshold: 2.0    # seconds
    slow_db_threshold: 1.0         # seconds
    memory_warning_threshold: 80   # percentage
